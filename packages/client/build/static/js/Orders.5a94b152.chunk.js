(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{381:function(e,t,c){"use strict";c.r(t),c.d(t,"Orders",(function(){return Q}));var r=c(44),n=c(0),i=c(423),l=c(371),a=c(238),d=c(142),s=c(31),j=c(74),o=c(34),b=c(16),u=c(49),O=c(426),h=c(444),x=c.n(h),v=c(1),p=function(e){var t=e.open,c=e.children;return Object(v.jsx)(O.a,{open:t,className:x.a.modal,children:Object(v.jsx)("div",{className:x.a.contentWrapper,children:c})})},y=c(28),f=function(e){var t=e.symbol,c=e.side,r=e.price,i=e.origQty,a=e.executedQty,d=e.type,O=e.time,h=e.status,x=e.updateTime,f=e.stopPrice,g=e.orderId,m=Object(n.useState)(!1),_=Object(b.a)(m,2),T=_[0],k=_[1],Q=Object(s.useLazyQuery)(o.f),N=Object(b.a)(Q,2),S=N[0],q=N[1],B=Object(n.useCallback)((function(){S({variables:{symbol:t,orderId:g}})}),[t,g,S]);return Object(n.useEffect)((function(){q.loading||(q.error?(console.log(q.error),k(!0)):console.log(q.data))}),[q]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("tr",{children:[Object(v.jsxs)("td",{children:[Object(v.jsx)("div",{children:t}),Object(v.jsx)("div",{children:h})]}),Object(v.jsxs)("td",{children:[Object(v.jsx)("div",{children:c}),Object(v.jsx)("div",{children:d})]}),Object(v.jsx)("td",{children:Object(v.jsxs)("div",{children:[r," / ",f]})}),Object(v.jsx)("td",{children:Object(v.jsxs)("div",{children:[i," / ",a]})}),Object(v.jsxs)("td",{children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(u.a,{value:O})," ",Object(v.jsx)(u.c,{value:O})]}),O!==x&&Object(v.jsxs)("div",{children:[Object(v.jsx)(u.a,{value:x})," ",Object(v.jsx)(u.c,{value:x})]})]}),Object(v.jsxs)("td",{children:[Object(v.jsx)(l.a,{onClick:B,children:Object(v.jsx)(j.c,{})}),T&&Object(v.jsx)(p,{open:T,children:Object(v.jsx)(y.e,{modalId:"",onClose:function(){return k(!1)},header:Object(v.jsx)("span",{children:"Cancel order Error!"}),children:Object(v.jsx)("textarea",{value:JSON.stringify(q.error)})})})]})]})})},g=c(14),m=function(e){var t=Object(s.useMutation)(o.g,{fetchPolicy:"no-cache",refetchQueries:[{query:o.t}]}),c=Object(b.a)(t,2),r=c[0],i=c[1],a=Object(n.useCallback)((function(){r({refetchQueries:[{query:o.t}],variables:{orderId:e._id}})}),[e]),d=Object(n.useMemo)((function(){switch(e.type){case"FIXED_TRAILING_STOP":return function(e){var t,c,r,n,i,l,a=null;switch(null===(t=e.fixedTrailingStop)||void 0===t?void 0:t.quantityType){case g.b.QuoteOrderQty:a="".concat(e.fixedTrailingStop.quoteOrderQty," $");break;case g.b.Quantity:a=null===(c=e.fixedTrailingStop)||void 0===c?void 0:c.quantity}return[Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{children:[null===(r=e.fixedTrailingStop)||void 0===r?void 0:r.activateOnPrice," $ / ",null===(n=e.fixedTrailingStop)||void 0===n?void 0:n.sellOnPrice," $"]}),Object(v.jsx)("div",{children:null===(i=e.fixedTrailingStop)||void 0===i?void 0:i.priceType})]}),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:null===(l=e.fixedTrailingStop)||void 0===l?void 0:l.quantityType}),Object(v.jsx)("div",{children:a})]})]}(e);case"MOVING_BUY":return function(e){var t,c,r,n,i,l,a=null;switch(null===(t=e.movingBuy)||void 0===t?void 0:t.quantityType){case g.b.QuoteOrderQty:a="".concat(e.movingBuy.quoteOrderQty," $");break;case g.b.Quantity:a=null===(c=e.movingBuy)||void 0===c?void 0:c.quantity}return[Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{children:[null===(r=e.movingBuy)||void 0===r?void 0:r.activateOnPrice," $ / ",null===(n=e.movingBuy)||void 0===n?void 0:n.percent," %"]}),Object(v.jsx)("div",{children:null===(i=e.movingBuy)||void 0===i?void 0:i.priceType})]}),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:null===(l=e.movingBuy)||void 0===l?void 0:l.quantityType}),Object(v.jsx)("div",{children:a})]})]}(e)}return[null,null]}),[e]);return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.symbol}),Object(v.jsx)("td",{children:Object(v.jsx)("div",{children:e.type})}),Object(v.jsx)("td",{children:d[0]}),Object(v.jsx)("td",{children:d[1]}),Object(v.jsxs)("td",{children:[Object(v.jsx)(u.a,{value:e.createdAt})," ",Object(v.jsx)(u.c,{value:e.createdAt})]}),Object(v.jsxs)("td",{children:[Object(v.jsx)(l.a,{onClick:a,children:Object(v.jsx)(j.c,{})}),Object(v.jsx)(y.a,{error:i.loading?void 0:i.error})]})]})})},_=c(36),T=c(445),k=c.n(T),Q=function(){var e,t,c="BINANCE_ORDERS",b=Object(s.useQuery)(o.m,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),u=Object(s.useQuery)(o.t,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),O=Object(s.useSubscription)(o.e),h=Object(s.useSubscription)(o.d);Object(n.useEffect)((function(){u.loading||b.loading?_.b.modalLoader.show(c):_.b.modalLoader.close(c)}),[u.loading,b.loading]);var x=Object(n.useCallback)((function(){u.refetch(),b.refetch()}),[u.refetch,b.refetch]);return Object(n.useEffect)((function(){x()}),[O.data]),Object(n.useEffect)((function(){x()}),[h.data]),console.log(b.error,b.data),console.log(u.error,u.data),console.log("binanceOrderUpdateResponse: ",O),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(i.a,{paddingLeft:4,paddingRight:4,bgcolor:d.a[600],className:k.a.header,children:Object(v.jsxs)(i.a,{className:k.a.content,children:[(u.loading||b.loading)&&Object(v.jsx)("span",{children:"Pending"}),Object(v.jsx)(l.a,{onClick:x,children:Object(v.jsx)(j.j,{})})]})}),Object(v.jsxs)(i.a,{className:k.a.tableWrapper,pr:3,pl:3,pt:3,pb:3,mb:3,children:[Object(v.jsx)(a.a,{variant:"h5",children:"Binance orders"}),Object(v.jsx)(i.a,{className:k.a.tableWrapper,children:Object(v.jsx)("table",{children:Object(v.jsx)("tbody",{children:((null===b||void 0===b||null===(e=b.data)||void 0===e?void 0:e.getBinanceOrders)||[]).map((function(e){return Object(n.createElement)(f,Object(r.a)(Object(r.a)({},e),{},{key:e.orderId}))}))})})})]}),Object(v.jsxs)(i.a,{className:k.a.tableWrapper,pr:3,pl:3,pt:3,pb:3,mb:3,children:[Object(v.jsx)(a.a,{variant:"h5",children:"Orders"}),Object(v.jsx)(i.a,{className:k.a.tableWrapper,children:Object(v.jsx)("table",{children:Object(v.jsx)("tbody",{children:((null===u||void 0===u||null===(t=u.data)||void 0===t?void 0:t.getOrders)||[]).map((function(e){return Object(n.createElement)(m,Object(r.a)(Object(r.a)({},e),{},{key:e._id}))}))})})})]})]})}},444:function(e,t,c){e.exports={modal:"styles_modal__3IB6Q",contentWrapper:"styles_contentWrapper__3T-0F"}},445:function(e,t,c){e.exports={header:"styles_header__zF6_5",tableWrapper:"styles_tableWrapper__2_RRh",equalCell:"styles_equalCell__1KBd5",green:"styles_green__1_r2q",red:"styles_red__2A6Ic"}}}]);
//# sourceMappingURL=Orders.5a94b152.chunk.js.map